this.kontra.init();var goalsprite,usersprite,loop,kontra,currentKey,lastKey,moveArr=[],spriteArr=[],spriteY=-30,lastColor=0,loopRunning=!1,userMove=!1;function createStaticElems(){return goalsprite=kontra.sprite({x:0,y:125,color:"#000",width:500,height:1}),usersprite=kontra.sprite({x:115,y:115,color:"purple",width:13,height:7}),spriteArr.push(goalsprite),spriteArr.push(usersprite),!0}function createMovingElems(){for(var t=1;t<=5;t++){var e=kontra.sprite({x:randomizeVal("offsetX"),y:spriteY,color:randomizeVal("color"),width:10,height:5,dy:randomizeVal("dropRate")});moveArr.push(e),5===t&&addElemsToCanvas()}}function addElemsToCanvas(){loop=kontra.gameLoop({update:function(){moveArr.forEach(function(t){t.update(),(t.y>kontra.canvas.height||t.collidesWith(goalsprite))&&randomizeItem(t),t.collidesWith(usersprite)&&randomizeItem(t)})},render:function(){spriteArr.forEach(function(t){t.render()}),moveArr.forEach(function(t){t.render()})}}),startLoop(),btnEvents()}function startLoop(){loop.start(),loopRunning=!0}function stopLoop(){loop.stop(),loopRunning=!1}function moveUsersprite(t){usersprite.height;var e,o=kontra.canvas.width-usersprite.width-5;goalsprite.position.y,usersprite.height;switch(document.addEventListener("keyup",function(){clearInterval(e),userMove=!1}),console.log("***",t,"***"),t===lastKey&&void 0!==lastKey||(lastKey=t),t){case 37:e=setInterval(function(){r("x",!0,5)},15);break;case 39:e=setInterval(function(){r("x",!1,o)},15)}function r(t,e,o){"x"===t?e?(usersprite.position.x=usersprite.position.x-5,usersprite.position.x<=o&&(usersprite.position.x=o)):(usersprite.position.x=usersprite.position.x+5,usersprite.position.x>=o&&(usersprite.position.x=o)):e?(usersprite.position.y=usersprite.position.y-5,usersprite.position.y<=o&&(usersprite.position.y=o)):(usersprite.position.y=usersprite.position.y+5,usersprite.position.y>=o&&(usersprite.position.y=o))}return!0}function btnEvents(){var e=document.querySelectorAll("button.button-action");document.querySelector(".button-pause").classList.add("js-active"),e.length&&e.forEach(function(t){toggleActions(e,t),t.addEventListener("click",function(){toggleActions(e,t)})})}function toggleActions(t,e){t.forEach(function(t){t.dataset.jsAction===e.dataset.jsAction&&t.classList.toggle("js-active")});var o=document.querySelector("button.button-action.button-start");document.querySelector("button.button-action.button-pause").addEventListener("click",function(){loopRunning&&stopLoop()}),o.addEventListener("click",function(){loopRunning||startLoop()})}function randomizeItem(t){t.y=spriteY,t.x=randomizeVal("offsetX"),t.color=randomizeVal("color"),t.dy=randomizeVal("dropRate")}function randomizeVal(t){if("offsetX"===t){var e=20,o=Math.ceil(1),r=Math.floor(13);return e*=Math.floor(Math.random()*(r-o))+o}if("dropRate"===t){return(2*Math.random()+1).toFixed(2)}if("color"===t){var n,i=4*Math.random()+1,s=parseInt(i);switch(s===lastColor&&s++,lastColor=s){case 0:n="red";break;case 1:n="yellow";break;case 2:n="orange";break;case 3:n="blue";break;default:n="green"}return n}}setTimeout(function(){createStaticElems()&&createMovingElems()},1e3),document.addEventListener("keydown",function(t){t.preventDefault(),userMove||(moveUsersprite(t.keyCode),userMove=!0)});